<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />

    <title>Tests8 files</title>
  </head>
  <body>
    <input type="file" multiple />
    <script>
      let input = document.querySelector("input");
      input.addEventListener("change", () => {
        for (let file of Array.from(input.files)) {
          let prom = readFileText(file);
          prom.then((e) => console.log(e));
          /* let reader = new FileReader();
          reader.addEventListener("load", () => {
            console.log(
              "File",
              file.name,
              "starts with >",
              reader.result.slice(0, 20)
            );
          });
          reader.readAsText(file);*/
        }
      });

      function readFileText(file) {
        return new Promise((resolve, reject) => {
          let reader = new FileReader();
          reader.addEventListener("load", () => resolve(reader.result));
          reader.addEventListener("error", () => reject(reader.error));
          reader.readAsText(file);
        });
      }
    </script>
  </body>
</html>
